<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="469px" preserveAspectRatio="none" style="width:3361px;height:469px;background:#FFFFFF;" version="1.1" viewBox="0 0 3361 469" width="3361px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="47.7344" id="_title" style="stroke:none;stroke-width:1.0;" width="908" x="1225" y="15"/><a href="https://learn.microsoft.com/training/modules/configure-azure-synapse-link-with-azure-cosmos-db/" target="_top" title="https://learn.microsoft.com/training/modules/configure-azure-synapse-link-with-azure-cosmos-db/" xlink:actuate="onRequest" xlink:href="https://learn.microsoft.com/training/modules/configure-azure-synapse-link-with-azure-cosmos-db/" xlink:show="new" xlink:title="https://learn.microsoft.com/training/modules/configure-azure-synapse-link-with-azure-cosmos-db/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="104" x="1230" y="51.1426">Module</text></a><text fill="#000000" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacing" textLength="794" x="1334" y="51.1426">: Implement Azure Synapse Link with Azure Cosmos DB</text><rect fill="#091F2C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:3.0;" width="251" x="1427" y="244.1953"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="1437" y="268.7285">Synapse Link with Azure Cosmos DB</text><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="268" x="1728" y="146.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244" x="1738" y="171.291">Create a linked service for Cosmos DB</text><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="168" x="2046" y="146.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2056" y="171.291">Authentication options:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="459" x="2267" y="141.877">Account key: Specify an authentication key for your Cosmos DB account.</text><path d="M2214,165.5625 L2224,165.5625 C2239,165.5625 2239,136.1484 2254,136.1484 L2264,136.1484 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="462" x="2267" y="161.4863">Service Principal: Use the identity of the Azure Synapse Analytics service.</text><path d="M2214,165.5625 L2224,165.5625 C2239,165.5625 2239,155.7578 2254,155.7578 L2264,155.7578 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="478" x="2267" y="181.0957">System Assigned Managed Identity: Use system-assigned managed identity.</text><path d="M2214,165.5625 L2224,165.5625 C2239,165.5625 2239,175.3672 2254,175.3672 L2264,175.3672 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="385" x="2267" y="200.7051">User Managed Identity: Use a user-defined managed identity.</text><path d="M2214,165.5625 L2224,165.5625 C2239,165.5625 2239,194.9766 2254,194.9766 L2264,194.9766 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M1996,165.5625 L2006,165.5625 C2021,165.5625 2021,165.5625 2036,165.5625 L2046,165.5625 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M1678,263 L1688,263 C1703,263 1703,165.5625 1718,165.5625 L1728,165.5625 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#E1D3C7" height="37.6094" rx="12.5" ry="12.5" style="stroke:#E1D3C7;stroke-width:3.0;" width="242" x="1728" y="215.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="1738" y="239.9238">Query Cosmos DB data with Spark</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="596" x="2023" y="220.3145">Loading Azure Cosmos DB analytical data into a dataframe (spark.read.format("cosmos.olap"))</text><path d="M1970,234.1953 L1980,234.1953 C1995,234.1953 1995,214.5859 2010,214.5859 L2020,214.5859 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="509" x="2023" y="239.9238">Writing a dataframe to a Cosmos DB container (mydf.write.format("cosmos.oltp"))</text><path d="M1970,234.1953 L1980,234.1953 C1995,234.1953 1995,234.1953 2010,234.1953 L2020,234.1953 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="377" x="2023" y="259.5332">Using Spark SQL to query Azure Cosmos DB analytical data</text><path d="M1970,234.1953 L1980,234.1953 C1995,234.1953 1995,253.8047 2010,253.8047 L2020,253.8047 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><path d="M1678,263 L1688,263 C1703,263 1703,234.1953 1718,234.1953 L1728,234.1953 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#07641D" height="37.6094" rx="12.5" ry="12.5" style="stroke:#07641D;stroke-width:3.0;" width="260" x="1728" y="312.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="1738" y="337.3613">Query Cosmos DB with Synapse SQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305" x="2041" y="279.1426">Using OPENROWSET with an authentication key</text><path d="M1988,331.6328 L1998,331.6328 C2013,331.6328 2013,273.4141 2028,273.4141 L2038,273.4141 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244" x="2041" y="298.752">Using OPENROWSET with a credential</text><path d="M1988,331.6328 L1998,331.6328 C2013,331.6328 2013,293.0234 2028,293.0234 L2038,293.0234 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2041" y="318.3613">Specifying a schema</text><path d="M1988,331.6328 L1998,331.6328 C2013,331.6328 2013,312.6328 2028,312.6328 L2038,312.6328 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2041" y="337.9707">Creating a view in a database</text><path d="M1988,331.6328 L1998,331.6328 C2013,331.6328 2013,332.2422 2028,332.2422 L2038,332.2422 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><rect fill="#07641D" height="37.6094" rx="12.5" ry="12.5" style="stroke:#07641D;stroke-width:3.0;" width="281" x="2038" y="352.0469"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="2048" y="376.5801">Considerations for Serverless SQL pools</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="977" x="2372" y="366.7754">Provision your Azure Cosmos DB analytical storage and any client applications (for example Microsoft Power BI) in the same region as serverless SQL pool.</text><path d="M2319,370.8516 L2329,370.8516 C2344,370.8516 2344,361.0469 2359,361.0469 L2369,361.0469 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="973" x="2372" y="386.3848">When working with string columns, use the OPENROWSET function with the explicit WITH clause and specify an appropriate data length for the string data.</text><path d="M2319,370.8516 L2329,370.8516 C2344,370.8516 2344,380.6563 2359,380.6563 L2369,380.6563 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><path d="M1988,331.6328 L1998,331.6328 C2013,331.6328 2013,370.8516 2028,370.8516 L2038,370.8516 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><path d="M1678,263 L1688,263 C1703,263 1703,331.6328 1718,331.6328 L1728,331.6328 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="372" x="1005" y="128.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="348" x="1015" y="152.9004">Enable Cosmos DB account to use Azure Synapse Link</text><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="341" x="614" y="89.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="317" x="624" y="113.6816">Enabling Azure Synapse Link in Azure Cosmos DB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="288" x="273" y="84.2676">Use the Azure portal or Azure CLI, PowerShell</text><path d="M614,107.9531 L604,107.9531 C589,107.9531 589,78.5391 574,78.5391 L564,78.5391 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="377" y="103.877">Azure Cosmos DB for NoSQL</text><path d="M614,107.9531 L604,107.9531 C589,107.9531 589,98.1484 574,98.1484 L564,98.1484 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="360" y="123.4863">Azure Cosmos DB for MongoDB</text><path d="M614,107.9531 L604,107.9531 C589,107.9531 589,117.7578 574,117.7578 L564,117.7578 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="259" y="143.0957">Azure Cosmos DB for Apache Gremlin (preview)</text><path d="M614,107.9531 L604,107.9531 C589,107.9531 589,137.3672 574,137.3672 L564,137.3672 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M1005,147.1719 L995,147.1719 C980,147.1719 980,107.9531 965,107.9531 L955,107.9531 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="119" x="836" y="167.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="846" y="192.1191">Considerations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="664" y="162.7051">You can't disable it</text><path d="M836,186.3906 L826,186.3906 C811,186.3906 811,156.9766 796,156.9766 L786,156.9766 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="380" y="182.3145">Create or update a container with support for an analytical store</text><path d="M836,186.3906 L826,186.3906 C811,186.3906 811,176.5859 796,176.5859 L786,176.5859 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="317" x="466" y="201.9238">Schema Type: WellDefined (default) or FullFidelity</text><path d="M836,186.3906 L826,186.3906 C811,186.3906 811,196.1953 796,196.1953 L786,196.1953 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="402" y="221.5332">After a schema type has been assigned, you can't change it.</text><path d="M836,186.3906 L826,186.3906 C811,186.3906 811,215.8047 796,215.8047 L786,215.8047 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M1005,147.1719 L995,147.1719 C980,147.1719 980,186.3906 965,186.3906 L955,186.3906 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M1427,263 L1417,263 C1402,263 1402,147.1719 1387,147.1719 L1377,147.1719 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="304" x="1073" y="322.6328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="280" x="1083" y="347.166">Create an analytical store enabled container</text><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="211" x="812" y="264.4141"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="822" y="288.9473">Analytical store schema types</text><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="103" x="659" y="235.6094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="669" y="260.1426">Well-defined</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="443" x="163" y="260.1426">The default schema type for an Azure Cosmos DB for NoSQL account.</text><path d="M659,254.4141 L649,254.4141 C634,254.4141 634,254.4141 619,254.4141 L609,254.4141 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M812,283.2188 L802,283.2188 C787,283.2188 787,254.4141 772,254.4141 L762,254.4141 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="91" x="671" y="293.2188"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="681" y="317.752">Full fidelity</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="596" x="22" y="317.752">The default (and only supported) schema type for an Azure Cosmos DB for MongoDB account.</text><path d="M671,312.0234 L661,312.0234 C646,312.0234 646,312.0234 631,312.0234 L621,312.0234 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M812,283.2188 L802,283.2188 C787,283.2188 787,312.0234 772,312.0234 L762,312.0234 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M1073,341.4375 L1063,341.4375 C1048,341.4375 1048,283.2188 1033,283.2188 L1023,283.2188 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="320" x="703" y="350.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="713" y="375.3613">Enabling analytical store support in a container</text><path d="M1073,341.4375 L1063,341.4375 C1048,341.4375 1048,369.6328 1033,369.6328 L1023,369.6328 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="119" x="904" y="409.0469"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="914" y="433.5801">Considerations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="448" x="403" y="413.9707">Analytical store support can't be disabled without deleting the container</text><path d="M904,427.8516 L894,427.8516 C879,427.8516 879,408.2422 864,408.2422 L854,408.2422 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="552" x="299" y="433.5801">Setting the analytical store TTL value to 0 or null effectively disables the analytical store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="10" y="423.7754">By no longer synchronizing new items</text><path d="M299,427.8516 L289,427.8516 C274,427.8516 274,418.0469 259,418.0469 L249,418.0469 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="19" y="443.3848">Deleting items already synchronized</text><path d="M299,427.8516 L289,427.8516 C274,427.8516 274,437.6563 259,437.6563 L249,437.6563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M904,427.8516 L894,427.8516 C879,427.8516 879,427.8516 864,427.8516 L854,427.8516 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="551" x="300" y="453.1895">After setting this value to 0, you can't re-enable analytical store support in the container</text><path d="M904,427.8516 L894,427.8516 C879,427.8516 879,447.4609 864,447.4609 L854,447.4609 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M1073,341.4375 L1063,341.4375 C1048,341.4375 1048,427.8516 1033,427.8516 L1023,427.8516 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M1427,263 L1417,263 C1402,263 1402,341.4375 1387,341.4375 L1377,341.4375 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><!--MD5=[da1ac043d45a59c7e5020d615d26abab]
@startmindmap
<style>
title {
        FontSize 30
        FontColor #000000
    }
mindmapDiagram {
    :depth(0) {
        BackgroundColor #091f2c
        FontColor #ffffff
        LineThickness 3.0
    }
    .topic1 {
        BackgroundColor #ffb900
        LineColor #ffb900
        LineThickness 3.0
        FontColor #000000
    }
    .topic2 {
        BackgroundColor #f4364c
        LineColor #f4364c
        LineThickness 3.0
        FontColor #ffffff
    }
    .topic3 {
        BackgroundColor #c5b4e3
        LineColor #c5b4e3
        LineThickness 3.0
        FontColor #000000
    }
    .topic4 {
        BackgroundColor #e1d3c7
        LineColor #e1d3c7
        LineThickness 3.0
        FontColor #000000
    }
    .topic5 {
        BackgroundColor #07641d
        LineColor #07641d
        LineThickness 3.0
        FontColor #ffffff
    }
}
</style>
title [[https://learn.microsoft.com/training/modules/configure-azure-synapse-link-with-azure-cosmos-db/ Module]]: Implement Azure Synapse Link with Azure Cosmos DB
+ Synapse Link with Azure Cosmos DB
- - Enable Cosmos DB account to use Azure Synapse Link <<topic1>>
- - - Enabling Azure Synapse Link in Azure Cosmos DB <<topic1>>
- - - -_ Use the Azure portal or Azure CLI, PowerShell
- - - -_ Azure Cosmos DB for NoSQL
- - - -_ Azure Cosmos DB for MongoDB
- - - -_ Azure Cosmos DB for Apache Gremlin (preview)
- - - Considerations <<topic1>>
- - - -_ You can't disable it
- - - -_ Create or update a container with support for an analytical store
- - - -_ Schema Type: WellDefined (default) or FullFidelity
- - - -_ After a schema type has been assigned, you can't change it.
- - Create an analytical store enabled container <<topic2>>
- - - Analytical store schema types <<topic2>>
- - - - Well-defined <<topic2>>
- - - - -_ The default schema type for an Azure Cosmos DB for NoSQL account.
- - - - Full fidelity <<topic2>>
- - - - -_ The default (and only supported) schema type for an Azure Cosmos DB for MongoDB account.
- - - Enabling analytical store support in a container <<topic2>>
- - - Considerations <<topic2>>
- - - -_ Analytical store support can't be disabled without deleting the container
- - - -_ Setting the analytical store TTL value to 0 or null effectively disables the analytical store
- - - - -_ By no longer synchronizing new items
- - - - -_ Deleting items already synchronized
- - - -_ After setting this value to 0, you can't re-enable analytical store support in the container
++ Create a linked service for Cosmos DB <<topic3>>
+++ Authentication options: <<topic3>>
++++_ Account key: Specify an authentication key for your Cosmos DB account.
++++_ Service Principal: Use the identity of the Azure Synapse Analytics service.
++++_ System Assigned Managed Identity: Use system-assigned managed identity.
++++_ User Managed Identity: Use a user-defined managed identity.
++ Query Cosmos DB data with Spark <<topic4>>
+++_ Loading Azure Cosmos DB analytical data into a dataframe (spark.read.format("cosmos.olap"))
+++_ Writing a dataframe to a Cosmos DB container (mydf.write.format("cosmos.oltp"))
+++_ Using Spark SQL to query Azure Cosmos DB analytical data
++ Query Cosmos DB with Synapse SQL <<topic5>>
+++_ Using OPENROWSET with an authentication key
+++_ Using OPENROWSET with a credential
+++_ Specifying a schema
+++_ Creating a view in a database
+++ Considerations for Serverless SQL pools <<topic5>>
++++_ Provision your Azure Cosmos DB analytical storage and any client applications (for example Microsoft Power BI) in the same region as serverless SQL pool.
++++_ When working with string columns, use the OPENROWSET function with the explicit WITH clause and specify an appropriate data length for the string data.
@endmindmap

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>