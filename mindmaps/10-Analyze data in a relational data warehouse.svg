<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="509px" preserveAspectRatio="none" style="width:2883px;height:509px;background:#FFFFFF;" version="1.1" viewBox="0 0 2883 509" width="2883px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="47.7344" id="_title" style="stroke:none;stroke-width:1.0;" width="751" x="1064.5" y="15"/><a href="https://learn.microsoft.com/training/modules/design-multidimensional-schema-to-optimize-analytical-workloads" target="_top" title="https://learn.microsoft.com/training/modules/design-multidimensional-schema-to-optimize-analytical-workloads" xlink:actuate="onRequest" xlink:href="https://learn.microsoft.com/training/modules/design-multidimensional-schema-to-optimize-analytical-workloads" xlink:show="new" xlink:title="https://learn.microsoft.com/training/modules/design-multidimensional-schema-to-optimize-analytical-workloads" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="104" x="1069.5" y="51.1426">Module</text></a><text fill="#000000" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacing" textLength="637" x="1173.5" y="51.1426">: Analyze data in a relational data warehouse</text><rect fill="#091F2C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:3.0;" width="123" x="1208" y="264.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1218" y="288.6426">Data warehouse</text><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="203" x="1381" y="195.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="1391" y="220.0098">Load data warehouse tables</text><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="99" x="1634" y="161.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1644" y="185.998">COPY INTO</text><path d="M1584,214.2813 L1594,214.2813 C1609,214.2813 1609,180.2695 1624,180.2695 L1634,180.2695 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="119" x="1634" y="219.0742"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1644" y="243.6074">Considerations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="1806" y="214.1934">Source -&gt; Data Lake -&gt; Staging tables</text><path d="M1753,237.8789 L1763,237.8789 C1778,237.8789 1778,208.4648 1793,208.4648 L1803,208.4648 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1065" x="1806" y="233.8027">Load the dimension tables from the dimension data in the staging tables, updating existing rows or inserting new rows and generating surrogate key values as necessary.</text><path d="M1753,237.8789 L1763,237.8789 C1778,237.8789 1778,228.0742 1793,228.0742 L1803,228.0742 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="791" x="1806" y="253.4121">Load the fact tables from the fact data in the staging tables, looking up the appropriate surrogate keys for related dimensions.</text><path d="M1753,237.8789 L1763,237.8789 C1778,237.8789 1778,247.6836 1793,247.6836 L1803,247.6836 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="519" x="1806" y="273.0215">Perform post-load optimization by updating indexes and table distribution statistics.</text><path d="M1753,237.8789 L1763,237.8789 C1778,237.8789 1778,267.293 1793,267.293 L1803,267.293 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M1584,214.2813 L1594,214.2813 C1609,214.2813 1609,237.8789 1624,237.8789 L1634,237.8789 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M1331,282.9141 L1341,282.9141 C1356,282.9141 1356,214.2813 1371,214.2813 L1381,214.2813 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#E1D3C7" height="37.6094" rx="12.5" ry="12.5" style="stroke:#E1D3C7;stroke-width:3.0;" width="180" x="1381" y="326.9258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1391" y="351.459">Query a data warehouse</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="1614" y="292.6309">Aggregating measures by dimension attributes</text><path d="M1561,345.7305 L1571,345.7305 C1586,345.7305 1586,286.9023 1601,286.9023 L1611,286.9023 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="1614" y="312.2402">Joins in a snowflake schema</text><path d="M1561,345.7305 L1571,345.7305 C1586,345.7305 1586,306.5117 1601,306.5117 L1611,306.5117 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="1614" y="361.2637">Using ranking functions</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1814" y="331.8496">ROW_NUMBER</text><path d="M1761,355.5352 L1771,355.5352 C1786,355.5352 1786,326.1211 1801,326.1211 L1811,326.1211 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1814" y="351.459">RANK</text><path d="M1761,355.5352 L1771,355.5352 C1786,355.5352 1786,345.7305 1801,345.7305 L1811,345.7305 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1814" y="371.0684">DENSE_RANK</text><path d="M1761,355.5352 L1771,355.5352 C1786,355.5352 1786,365.3398 1801,365.3398 L1811,365.3398 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1814" y="390.6777">NTILE</text><path d="M1761,355.5352 L1771,355.5352 C1786,355.5352 1786,384.9492 1801,384.9492 L1811,384.9492 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1561,345.7305 L1571,345.7305 C1586,345.7305 1586,355.5352 1601,355.5352 L1611,355.5352 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="1614" y="410.2871">Retrieving an approximate count</text><path d="M1561,345.7305 L1571,345.7305 C1586,345.7305 1586,404.5586 1601,404.5586 L1611,404.5586 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><path d="M1331,282.9141 L1341,282.9141 C1356,282.9141 1356,345.7305 1371,345.7305 L1381,345.7305 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="238" x="920" y="136.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="930" y="161.1816">Design a data warehouse schema</text><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="199" x="671" y="136.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="681" y="161.1816">Tables in a data warehouse</text><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="132" x="489" y="79.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="499" y="103.877">Dimension tables</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222" x="214" y="84.2676">Surrogate key (unique to the DWH)</text><path d="M489,98.1484 L479,98.1484 C464,98.1484 464,78.5391 449,78.5391 L439,78.5391 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="426" x="10" y="103.877">Alternate key (natural key, business key, from transactional system)</text><path d="M489,98.1484 L479,98.1484 C464,98.1484 464,98.1484 449,98.1484 L439,98.1484 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="260" y="123.4863">Slowly changing dimensions</text><path d="M489,98.1484 L479,98.1484 C464,98.1484 464,117.7578 449,117.7578 L439,117.7578 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M671,155.4531 L661,155.4531 C646,155.4531 646,98.1484 631,98.1484 L621,98.1484 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="94" x="527" y="136.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="537" y="161.4863">Fact tables</text><path d="M671,155.4531 L661,155.4531 C646,155.4531 646,155.7578 631,155.7578 L621,155.7578 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="233" x="388" y="194.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="398" y="219.0957">Data warehouse schema designs</text><path d="M671,155.4531 L661,155.4531 C646,155.4531 646,213.3672 631,213.3672 L621,213.3672 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M920,155.4531 L910,155.4531 C895,155.4531 895,155.4531 880,155.4531 L870,155.4531 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M1208,282.9141 L1198,282.9141 C1183,282.9141 1183,155.4531 1168,155.4531 L1158,155.4531 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="214" x="944" y="350.8281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="954" y="375.3613">Create data warehouse tables</text><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="219" x="675" y="262.5859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="685" y="287.1191">Creating a dedicated SQL pool</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="527" y="257.7051">A unique name</text><path d="M675,281.3906 L665,281.3906 C650,281.3906 650,251.9766 635,251.9766 L625,251.9766 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="275" x="347" y="277.3145">A performance level [DW100c - DW30000c]</text><path d="M675,281.3906 L665,281.3906 C650,281.3906 650,271.5859 635,271.5859 L625,271.5859 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="388" y="296.9238">Empty pool or restore from a backup.</text><path d="M675,281.3906 L665,281.3906 C650,281.3906 650,291.1953 635,291.1953 L625,291.1953 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="279" x="343" y="316.5332">The collation of the SQL pool (can't change)</text><path d="M675,281.3906 L665,281.3906 C650,281.3906 650,310.8047 635,310.8047 L625,310.8047 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M944,369.6328 L934,369.6328 C919,369.6328 919,281.3906 904,281.3906 L894,281.3906 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="237" x="657" y="390.0469"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="667" y="414.5801">Considerations for creating tables</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="380" y="336.1426">Fact, Dimension and Staging tables</text><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,330.4141 617,330.4141 L607,330.4141 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="447" y="355.752">Data integrity constraints</text><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,350.0234 617,350.0234 L607,350.0234 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="556" y="375.3613">Indexes</text><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,369.6328 617,369.6328 L607,369.6328 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="533" y="394.9707">Distribution</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="369" y="375.3613">Hash (fact tables)</text><path d="M533,389.2422 L523,389.2422 C508,389.2422 508,369.6328 493,369.6328 L483,369.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="299" y="394.9707">Round-robin (staging tables)</text><path d="M533,389.2422 L523,389.2422 C508,389.2422 508,389.2422 493,389.2422 L483,389.2422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="293" y="414.5801">Replicated (dimension tables)</text><path d="M533,389.2422 L523,389.2422 C508,389.2422 508,408.8516 493,408.8516 L483,408.8516 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,389.2422 617,389.2422 L607,389.2422 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="440" y="434.1895">Creating dimension tables</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="246" y="434.1895">Time dimension tables</text><path d="M440,428.4609 L430,428.4609 C415,428.4609 415,428.4609 400,428.4609 L390,428.4609 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,428.4609 617,428.4609 L607,428.4609 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="481" y="453.7988">Creating fact tables</text><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,448.0703 617,448.0703 L607,448.0703 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="458" y="473.4082">Creating staging tables</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="171" y="453.7988">CREATE EXTERNAL DATA SOURCE</text><path d="M458,467.6797 L448,467.6797 C433,467.6797 433,448.0703 418,448.0703 L408,448.0703 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="178" y="473.4082">CREATE EXTERNAL FILE FORMAT</text><path d="M458,467.6797 L448,467.6797 C433,467.6797 433,467.6797 418,467.6797 L408,467.6797 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="226" y="493.0176">CREATE EXTERNAL TABLE</text><path d="M458,467.6797 L448,467.6797 C433,467.6797 433,487.2891 418,487.2891 L408,487.2891 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M657,408.8516 L647,408.8516 C632,408.8516 632,467.6797 617,467.6797 L607,467.6797 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M944,369.6328 L934,369.6328 C919,369.6328 919,408.8516 904,408.8516 L894,408.8516 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M1208,282.9141 L1198,282.9141 C1183,282.9141 1183,369.6328 1168,369.6328 L1158,369.6328 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><!--MD5=[e73b50f4598054099c245e05a835b99e]
@startmindmap
<style>
title {
        FontSize 30
        FontColor #000000
    }
mindmapDiagram {
    :depth(0) {
        BackgroundColor #091f2c
        FontColor #ffffff
        LineThickness 3.0
    }
    .topic1 {
        BackgroundColor #ffb900
        LineColor #ffb900
        LineThickness 3.0
        FontColor #000000
    }
    .topic2 {
        BackgroundColor #f4364c
        LineColor #f4364c
        LineThickness 3.0
        FontColor #ffffff
    }
    .topic3 {
        BackgroundColor #c5b4e3
        LineColor #c5b4e3
        LineThickness 3.0
        FontColor #000000
    }
    .topic4 {
        BackgroundColor #e1d3c7
        LineColor #e1d3c7
        LineThickness 3.0
        FontColor #000000
    }
    .topic5 {
        BackgroundColor #07641d
        LineColor #07641d
        LineThickness 3.0
        FontColor #ffffff
    }
}
</style>
title [[https://learn.microsoft.com/training/modules/design-multidimensional-schema-to-optimize-analytical-workloads Module]]: Analyze data in a relational data warehouse
+ Data warehouse
- - Design a data warehouse schema <<topic1>>
- - - Tables in a data warehouse <<topic1>>
- - - - Dimension tables <<topic1>>
- - - - -_ Surrogate key (unique to the DWH)
- - - - -_ Alternate key (natural key, business key, from transactional system)
- - - - -_ Slowly changing dimensions
- - - - Fact tables <<topic1>>
- - - - Data warehouse schema designs <<topic1>>
- - Create data warehouse tables <<topic2>>
- - - Creating a dedicated SQL pool <<topic2>>
- - - -_ A unique name
- - - -_ A performance level [DW100c - DW30000c]
- - - -_ Empty pool or restore from a backup.
- - - -_ The collation of the SQL pool (can't change)
- - - Considerations for creating tables <<topic2>>
- - - -_ Fact, Dimension and Staging tables
- - - -_ Data integrity constraints
- - - -_ Indexes
- - - -_ Distribution
- - - - -_ Hash (fact tables)
- - - - -_ Round-robin (staging tables)
- - - - -_ Replicated (dimension tables)
- - - -_ Creating dimension tables
- - - - -_ Time dimension tables
- - - -_ Creating fact tables
- - - -_ Creating staging tables
- - - - -_ CREATE EXTERNAL DATA SOURCE
- - - - -_ CREATE EXTERNAL FILE FORMAT
- - - - -_ CREATE EXTERNAL TABLE
++ Load data warehouse tables <<topic3>>
+++ COPY INTO <<topic3>>
+++ Considerations <<topic3>>
++++_ Source -> Data Lake -> Staging tables
++++_ Load the dimension tables from the dimension data in the staging tables, updating existing rows or inserting new rows and generating surrogate key values as necessary.
++++_ Load the fact tables from the fact data in the staging tables, looking up the appropriate surrogate keys for related dimensions.
++++_ Perform post-load optimization by updating indexes and table distribution statistics.
++ Query a data warehouse <<topic4>>
+++_ Aggregating measures by dimension attributes
+++_ Joins in a snowflake schema
+++_ Using ranking functions
++++_ ROW_NUMBER
++++_ RANK
++++_ DENSE_RANK
++++_ NTILE
+++_ Retrieving an approximate count
@endmindmap

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>